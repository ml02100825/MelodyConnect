server.port=8080
spring.datasource.url=jdbc:mysql://${DB_HOST:${MYSQL_HOST:db}}:${DB_PORT:${MYSQL_PORT:3306}}/${DB_NAME:${MYSQL_DATABASE:MelodyConnectdb}}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC&characterEncoding=utf8
spring.datasource.username=${DB_USER:${MYSQL_USER:appuser}}
spring.datasource.password=${DB_PASSWORD:${MYSQL_PASSWORD:apppass}}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.sql.init.mode=never

# JPA/Hibernate設定
spring.jpa.hibernate.ddl-auto=update
spring.jpa.generate-ddl=true
spring.jpa.defer-datasource-initialization=true
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.open-in-view=false

# Hibernateログ
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ===========================================
# JWT Configuration
# ===========================================
jwt.secret=${JWT_SECRET:myDefaultSecretKeyForDevelopmentPurposeOnly12345678901234567890}
jwt.access-token-expiration=86400000
jwt.refresh-token-expiration=604800000

# ===========================================
# Mail Configuration (Gmail)
# ===========================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587

# ★修正: 環境変数から読み込むように変更
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}

spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=50000
spring.mail.properties.mail.smtp.timeout=50000
spring.mail.properties.mail.smtp.writetimeout=50000

# ===========================================
# External API Configuration
# ===========================================

# Gemini API
gemini.api.key=${GEMINI_API_KEY:}
gemini.api.model=gemini-2.0-flash

# Spotify API
spotify.client.id=${SPOTIFY_CLIENT_ID:}
spotify.client.secret=${SPOTIFY_CLIENT_SECRET:}

# Wordnik API
wordnik.api.key=${WORDNIK_API_KEY:}

# Genius API
genius.api.key=${GENIUS_API_KEY:}

# (Legacy) Claude API
claude.api.key=${CLAUDE_API_KEY:}
claude.api.model=claude-3-5-sonnet-20241022
claude.api.max-tokens=4096

# (Legacy) Apple Music API
apple.music.api.key=${APPLE_MUSIC_API_KEY:}
apple.music.storefront=us

# Google Cloud TTS
google.cloud.api.key=${GOOGLE_CLOUD_API_KEY:}
tts.audio.output.directory=./audio
tts.audio.base.url=${TTS_AUDIO_BASE_URL:http://localhost:8080/audio}

# ===========================================
# AWS S3 Configuration
# ===========================================
upload.storage.type=s3
aws.s3.bucket-name=${AWS_S3_BUCKET_NAME:}
aws.s3.region=${AWS_S3_REGION:}
aws.access-key-id=${AWS_ACCESS_KEY_ID:}
aws.secret-access-key=${AWS_SECRET_ACCESS_KEY:}
aws.session-token=${AWS_SESSION_TOKEN:}
aws.s3.folder=uploads/images
aws.s3.audio-folder=uploads/audio
aws.s3.presign-expiration-minutes=15
# Admin Settings
# ===========================================
# 管理者アクセス許可IPリスト（カンマ区切り、空欄で全IP許可）
admin.allowed-ips=${ADMIN_ALLOWED_IPS:}

# ===========================================
# Application Settings
# ===========================================
question.default.fill-in-blank-count=10
question.default.listening-count=10

logging.level.com.example.api=DEBUG
logging.level.org.springframework.web=INFO